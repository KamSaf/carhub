{% extends 'base.html.twig' %}

{% block title %}User profile{% endblock %}

{% block body %}
    {# {% if error %}
        <div style="margin-top: 10px;" class="alert alert-danger">{{ error.messageKey|trans(error.messageData, 'security') }}</div>
    {% endif %} #}

    <div class="container">
        <div class="row">
            <div class="col"></div>
            <div style="margin-top: 25px;" class="col shadow bg-body rounded card">
                <div class="card-body">
                        <h1 class="h3 mb-3 font-weight-normal text-center">User profile</h1>
                        <hr>
                        <div style="margin-bottom: 15px;" class="row">
                            <span class="col text-start">
                                <span class="float-start">Email address:</span>
                                <span class="float-end">
                                    {{ app.user.email }}
                                </span>
                            </span>
                        </div>
                        <div style="margin-bottom: 15px;" class="row">
                            <span class="col text-start">
                                <span class="float-start">Name:</span>
                                <span class="float-end">
                                    {{ app.user.name }}
                                </span>
                            </span>
                        </div>
                        <div style="margin-bottom: 15px;" class="row">
                            <span class="col text-start">
                                <span class="float-start">Password:</span>
                                <span class="float-end">
                                    *****
                                </span>
                            </span>
                        </div>
                        <div style="margin-bottom: 15px;" class="row">
                            <span class="col text-start">
                                <span class="float-start">Register date:</span>
                                <span class="float-end">
                                    {{ app.user.regdate|date("d.m.Y") }}
                                </span>
                            </span>
                        </div>
                        <div style="margin-bottom: 15px;" class="row">
                            <span class="col text-start">
                                <span class="float-start">Time zone:</span>
                                <span class="float-end">
                                    {{ app.user.timezone }}
                                </span>
                            </span>
                        </div>
                        <span>
                            <button class="btn btn-sm btn-outline-info edit-profile-button" data-toggle="modal" data-target="#edit_profile_modal">Edit</button>
                            <button class="btn btn-danger btn-sm float-end delete-profile-button" data-toggle="modal" data-target="#confirm_delete_modal">Delete account</button>
                        </span>
                </div>
                
            </div>
            <div class="col"></div>
        </div>
    </div>

<div class="modal fade" id="confirm_delete_modal" tabindex="-1" role="dialog" aria-labelledby="delete_modal_label" aria-hidden="true">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="delete_modal_label">Confirm deleting</h5>
        </div>
        <div class="modal-body">
          Are you sure you?
        </div>
        <div class="modal-footer">
            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
            <button type="button" class="btn btn-danger confirm-delete-profile-button" data-user-id="{{ app.user.id }}" data-bs-dismiss="modal" id="confirm_delete_profile_button">Delete</button>
        </div>
      </div>
    </div>
</div>

<div class="modal fade" id="edit_profile_modal" tabindex="-1" role="dialog" aria-labelledby="edit_profile_modal_label" aria-hidden="true">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="edit_profile_modal_label">Edit profile</h5>
        </div>
        <div class="modal-body">
        <small class="text-muted">Leave empty field if you don't want to change it</small>
            <div style="margin-top: 15px; margin-bottom: 15px;" class="row">
                <span class="col text-start">
                    <span class="float-start">New email address:</span>
                    <span class="float-end">
                        <input name="frm_email" type="email">
                    </span>
                </span>
            </div>
            <div style="margin-bottom: 15px;" class="row">
                <span class="col text-start">
                    <span class="float-start">New name:</span>
                    <span class="float-end">
                        <input name="frm_name" type="text">
                    </span>
                </span>
            </div>
            <div style="margin-bottom: 15px;" class="row">
                <span class="col text-start">
                    <span class="float-start">New password:</span>
                    <span class="float-end">
                        <input name="frm_password" type="password">
                    </span>
                </span>
            </div>
            <div style="margin-bottom: 15px;" class="row">
                <span class="col text-start">
                    <span class="float-start">New time zone:</span>
                    <span class="float-end">
                        <select class="form-select" name="frm_timezone">
                            <option value="{{ app.user.timezone }}">{{ app.user.timezone }}</option>
                            {% for timezone in timezones %}
                                {% if timezone != app.user.timezone %}
                                    <option value="{{ timezone }}">{{ timezone }}</option>
                                {% endif %}
                            {% endfor %}
                        </select>
                    </span>
                </span>
            </div>
            <div style="margin-top: 35px; margin-bottom: 15px;" class="row">
                <span class="col text-start">
                    <span class="float-start">Current password:</span>
                    <span class="float-end">
                        <input name="frm_current_password" type="password">
                    </span>
                </span>
            </div>
        </div>
        <div class="modal-footer">
            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
            <button type="button" class="btn btn-success save-edit-profile-button" data-user-id="{{ app.user.id }}" data-bs-dismiss="modal" id="save_edit_profile">Save</button>
        </div>
      </div>
    </div>
</div>

{% endblock %}


